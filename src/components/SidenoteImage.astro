---
import { Image } from "astro:assets";

interface Props {
  src: ImageMetadata;
  alt: string;
  [key: string]: any;
}

const { ...props } = Astro.props;

// Define widths based on layout type
const getImageSizes = (src: ImageMetadata) => {
  return "(max-width: 500px) 500px, (max-width: 800px) 800px, 800px";
};

// Define widths for image optimization
const getImageWidths = (src: ImageMetadata) => {
  return [500, 800];
};
---

<Image
  {...props}
  class="responsive-image"
  sizes={getImageSizes(props.src)}
  widths={getImageWidths(props.src)}
/>

<style>
  .responsive-image {
    height: auto;
    aspect-ratio: attr(width) / attr(height);
    object-fit: cover;
    width: 100%;
  }
</style>
