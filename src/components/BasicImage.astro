---
import { Image } from "astro:assets";

interface Props {
  src: ImageMetadata;
  alt: string;
  fullwidth?: boolean;
  [key: string]: any;
}

const { ...props } = Astro.props;
---

<figure class={props.fullwidth ? "fullwidth" : ""}>
  <Image {...props} class="responsive-image" />
  {!props.fullwidth && <slot name="sidenote" />}
</figure>

<style>
  figure {
    margin-bottom: 3rem;
  }

  figure.fullwidth {
    grid-column: text-start / margin-end;
  }

  @media (max-width: 760px) {
    figure.fullwidth {
      grid-column: page-start / page-end;
    }
  }

  .responsive-image {
    height: auto;
    aspect-ratio: attr(width) / attr(height);
    object-fit: cover;
    width: 100%;
  }
</style>
